<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Booking Calendar</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f0f0f0;
        }
        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-bottom: 20px;
        }
        .calendar-header {
            background-color: #4a90e2;
            color: white;
            padding: 10px;
            text-align: center;
            font-weight: bold;
        }
        .calendar-day {
            background-color: white;
            border: 1px solid #ddd;
            padding: 10px;
            min-height: 100px;
        }
        .date {
            font-weight: bold;
            margin-bottom: 5px;
        }
        .guest {
            font-size: 0.9em;
            margin-bottom: 2px;
        }
        .guest-count {
            font-weight: bold;
            color: #4a90e2;
            margin-top: 5px;
        }
        #updateStayBtn {
            background-color: #4a90e2;
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 1em;
        }
        #updateForm {
            display: none;
            background-color: white;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid #ddd;
        }
        input, button {
            margin: 10px 0;
            padding: 5px;
        }
    </style>
</head>
<body>
    <div id="calendar" class="calendar"></div>
    <button id="updateStayBtn">Update Stay</button>
    <div id="updateForm">
        <input type="text" id="guestName" placeholder="Your Name">
        <input type="date" id="newStartDate">
        <input type="date" id="newEndDate">
        <button onclick="updateStay()">Submit Update</button>
    </div>

    <script>
        const bookings = [
            { name: "Chagai", startDate: "2024-09-02", endDate: "2024-09-15" },
            { name: "Jesse", startDate: "2024-09-02", endDate: "2024-09-08" },
            { name: "Berni", startDate: "2024-09-02", endDate: "2024-09-22" },
            { name: "Daniel Ramos", startDate: "2024-09-02", endDate: "2024-09-08" },
            { name: "Nancy", startDate: "2024-09-02", endDate: "2024-09-06" },
            { name: "Casper", startDate: "2024-09-02", endDate: "2024-09-08" },
            { name: "Jacqueline", startDate: "2024-09-02", endDate: "2024-09-15" },
            { name: "Emiliano", startDate: "2024-09-02", endDate: "2024-09-06" },
            { name: "Aldo", startDate: "2024-09-02", endDate: "2024-09-06" },
            { name: "Wei Wei", startDate: "2024-09-02", endDate: "2024-09-02" },
            { name: "Sandor", startDate: "2024-09-03", endDate: "2024-09-06" },
            { name: "Jessie Alvarado", startDate: "2024-09-05", endDate: "2024-09-07" },
            { name: "Austin", startDate: "2024-09-10", endDate: "2024-09-15" },
            { name: "Mahdi", startDate: "2024-09-17", endDate: "2024-09-17" },
            { name: "Josi", startDate: "2024-09-15", endDate: "2024-09-15" },
            { name: "Paxi", startDate: "2024-09-15", endDate: "2024-09-15" }
        ];

        const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];

        function renderCalendar() {
            const calendarEl = document.getElementById('calendar');
            calendarEl.innerHTML = '';

            const startDate = new Date('2024-09-02');
            const endDate = new Date('2024-09-22');

            // Add header
            days.forEach(day => {
                const headerEl = document.createElement('div');
                headerEl.className = 'calendar-header';
                headerEl.textContent = day;
                calendarEl.appendChild(headerEl);
            });

            // Add days
            for (let d = new Date(startDate); d <= endDate; d.setDate(d.getDate() + 1)) {
                const dayEl = document.createElement('div');
                dayEl.className = 'calendar-day';

                const dateEl = document.createElement('div');
                dateEl.className = 'date';
                dateEl.textContent = `${d.getDate().toString().padStart(2, '0')}/${(d.getMonth() + 1).toString().padStart(2, '0')}/${d.getFullYear()}`;
                dayEl.appendChild(dateEl);

                const guestsForDay = bookings.filter(booking => 
                    new Date(booking.startDate) <= d && new Date(booking.endDate) >= d
                );

                guestsForDay.forEach(guest => {
                    const guestEl = document.createElement('div');
                    guestEl.className = 'guest';
                    guestEl.textContent = guest.name;
                    dayEl.appendChild(guestEl);
                });

                const countEl = document.createElement('div');
                countEl.className = 'guest-count';
                countEl.textContent = `Total: ${guestsForDay.length}`;
                dayEl.appendChild(countEl);

                calendarEl.appendChild(dayEl);
            }
        }

        document.getElementById('updateStayBtn').addEventListener('click', function() {
            document.getElementById('updateForm').style.display = 'block';
        });

        function updateStay() {
            const name = document.getElementById('guestName').value;
            const newStartDate = document.getElementById('newStartDate').value;
            const newEndDate = document.getElementById('newEndDate').value;

            if (!name || !newStartDate || !newEndDate) {
                alert('Please fill in all fields');
                return;
            }

            const existingBooking = bookings.find(booking => booking.name.toLowerCase() === name.toLowerCase());
            if (!existingBooking) {
                alert('Guest not found');
                return;
            }

            existingBooking.startDate = newStartDate;
            existingBooking.endDate = newEndDate;

            renderCalendar();
            document.getElementById('updateForm').style.display = 'none';
            document.getElementById('guestName').value = '';
            document.getElementById('newStartDate').value = '';
            document.getElementById('newEndDate').value = '';
        }

        renderCalendar();
    </script>
</body>
</html>